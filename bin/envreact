#!/bin/sh
#
# envreact

usage() {
    base=$(basename "$0")

    cat >&2 << EOF
Usage:
    $base
EOF

    [ $# -eq 0 ] || exit "$1"
}

main() {

    programs="
Midair
DOOM
ShadowOfTheTombRaider
"

    while :; do
        for prg in $programs; do
            pgrep -f "$prg" > /dev/null

            case "$?" in
                0)
                    pkill picom 2> /dev/null
                    turtle on
                    break
                    ;;
                *)
                    pgrep picom > /dev/null || picom &
                    turtle off
                    ;;
            esac
        done

        sleep 2
    done
}

main "$@"
