#!/bin/sh
#
# pulse

usage() {
    base=$(basename $0)

    cat >&2 << EOF
Usage:
    $base
EOF

    test $# -eq 0 || exit $1
}

main() {
   case "$(hostname)" in
        "fyriousa")
            # null sinks for discord and game audio
            pactl list sinks | grep -q "discord" || {
                pactl load-module module-null-sink sink_name=discord
                pactl load-module module-loopback source=discord.monitor \
                    sink=alsa_output.pci-0000_00_1f.3.analog-stereo
            }

            pactl list sinks | grep -q "audiosink" || {
                pactl load-module module-null-sink sink_name=audiosink
                pactl load-module module-loopback source=audiosink.monitor \
                    sink=alsa_output.pci-0000_00_1f.3.analog-stereo
            }

            # scarlett remap
            pactl list source | \
                grep -q "usb-Focusrite_Scarlett_Solo_USB-00.analog-stereo.remapped" || {
                pacmd load-module module-remap-source \
                master=alsa_input.usb-Focusrite_Scarlett_Solo_USB-00.analog-stereo \
                master_channel_map=front-left channel_map=mono \
                source_properties=device.description='"usb-Focusrite_Scarlett_Solo_USB-00"'
            }
            ;;
    esac
}

main "$@"
